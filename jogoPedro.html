<!DOCTYPE html>
<html lang="Pt-Br">
<head>
	<meta charset="UTF-8">
	<title>Campo Minado</title>
	<script type="text/javascript">
	// Variável para contar células abertas
	let abertas = 0;
	const totalSeguras = 21; // Total de células menos as minas (25 - 4 minas fixas)

	// Array para armazenar as posições fixas das minas
	const minasFixas = [1, 7, 13, 19];

	// Função para controle do jogo
	function controle(num, k) {
		k = k - 1;
		const valor = document.getElementsByTagName("input");

		if (num == 0) {
			// Jogador perde: revelar todas as minas
			for (let i = 0; i < valor.length; i++) {
				if (minasFixas.includes(i + 1)) {
					valor[i].setAttribute('value', '*');
					valor[i].style.backgroundColor = 'red';
				}
				valor[i].disabled = true;
			}
			setTimeout(() => {
				alert("Você perdeu. O jogo será reiniciado.");
				location.reload();
			}, 2000);
		} else {
			// Jogador continua
			valor[k].setAttribute('value', num);
			valor[k].disabled = true; // Evitar recontagem
			abertas++;

			// Verificar se o jogador venceu
			if (abertas === totalSeguras) {
				alert("Parabéns Pedro. Você conseguiu. Clique no link abaixo para receber o seu prêmio. Ho-ho-ho... Feliz Natal!");
				document.getElementById('link-premio').style.display = 'block';
			}
		}
	}
	</script>
	<style type="text/css">
		td {
			width: 50px;
			height: 50px;
			border: 3px solid #000;
		}

		table {
			margin-top: 10px;
			margin-bottom: 10px;
		}

		.btn {
			width: 50px;
			height: 50px;
			font-size: 30px;
			background-color: #f1f1f1;
		}

		#link-premio {
			display: none;
			margin-top: 20px;
			text-align: center;
			font-size: 20px;
			font-weight: bold;
			color: green;
		}
	</style>
</head>
<body>
	<div style="text-align: center; font-size: 45px; font-weight: bolder;">DESAFIO DE NATAL PARA PEDRO</div>
	<div style="text-align: center; font-size: 45px; font-weight: bolder;">Cuidado. Campo Minado!</div>
	<div style="text-align: center; font-size: 45px; font-weight: bolder;">Acerte todas as posições e ganhe uma surpresa!!!!</div>
	<div style="text-align: center; font-size: 20px; font-weight: bolder;">*Use o mouse para jogar.</div>

	<table align="center">
		<script type="text/javascript">
			let k = 0;
			for (let i = 0; i < 5; i++) {
				document.write('<tr>');
				for (let j = 0; j < 5; j++) {
					k++;
					const num = minasFixas.includes(k) ? 0 : Math.floor(Math.random() * 2) + 1;
					document.write('<td><input type="button" value="X" class="btn" id="' + k + '" onclick="controle(' + num + ',' + k + ');"></td>');
				}
				document.write('</tr>');
			}
		</script>
	</table>

	<div id="link-premio" style="text-align: center;">
		<a href="https://www.seu-premio.com" target="_blank">Clique aqui para receber seu prêmio!</a>
	</div>

	<div style="text-align: center; font-size: 10px; font-weight: bolder;">Developer: Tio Jorginho</div>
</body>
</html>
